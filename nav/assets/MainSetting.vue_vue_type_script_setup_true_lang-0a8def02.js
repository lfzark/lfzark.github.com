import{d as R,u as B,i as F,f as n,c as O,b as g,t as m,e as l,ck as f,cl as S,cm as b,cn as h,co as w,cp as V,cq as k,cr as C,cs as D,ct as U,cu as $,cv as x,w as p,g as z,s as v,cw as J,cx as T,ci as u,cy as y,k as q,o as A,a7 as c}from"./index-3d7fbf2c.js";import{_ as o}from"./SettingSelection.vue_vue_type_script_setup_true_lang-e2d4c55a.js";const W={key:0,px:"md:32 lg:64"},_={"my-16":"",text:"16 $text-c-1",italic:""},G={grid:"","grid-cols-2":"",md:"grid-cols-3",lg:"grid-cols-4","justify-between":"","gap-12":""},H={"mt-24":"",flex:"","flex-wrap":"","justify-center":"","gap-12":""},K={"my-24":"","flex-center":""},Z=R({__name:"MainSetting",setup(Q){const t=B(),r=F();function L(a){const i=f.children.find(e=>e.key===a.key).value.bgC;return v("div",{class:"flex items-center gap-x-8"},[v("div",{class:"w-16 h-16 circle border-1 border-fff",style:{backgroundColor:i}}),v("div",J(a.name))])}function j(a){t.setSettings({language:a}),T(a)}function P(a){r.setCateIndex(0),t.setSettings({websitePreference:a}),t.refreshSiteContainer()}function E(){const a={data:r.data,settings:t.settings},s=JSON.stringify(a),i=new Blob([s],{type:"application/json"}),e=URL.createObjectURL(i),d=document.createElement("a");d.download=`MoonStart_Data_${new Date().toLocaleString()}.json`,d.href=e,document.body.appendChild(d),d.click(),URL.revokeObjectURL(e),$message.success(u("messages.exported"))}function M(){const a=document.createElement("input");a.type="file",a.accept=".json",a.addEventListener("change",async()=>{var i;const s=(i=a.files)==null?void 0:i[0];if(s)try{const e=await s.text(),d=JSON.parse(e);if(!d.data||!d.settings)throw new Error("Invalid data");I(d),t.setSettings({websitePreference:"Customize"}),t.refreshSiteContainer(),$message.success(u("messages.imported"))}catch{$message.error(u("messages.warnInvalidImport"))}}),a.click()}function N(){$dialog.warning({title:u("messages.tip"),content:u("messages.warnResetData"),positiveText:u("button.confirm"),negativeText:u("button.cancel"),onPositiveClick(){r.restoreData(),t.restoreSettings(),y(t.settings.theme),T(t.settings.language),t.refreshSiteContainer(),$message.success(u("messages.reset")),r.setCateIndex(0)}})}function I(a){r.setData(a.data),t.setSettings(a.settings),y(a.settings.theme)}return(a,s)=>{const i=q;return n(t).isSetting?(A(),O("section",W,[g("div",_,m(a.$t("settings.title")),1),g("div",G,[l(o,{modelValue:n(t).settings.theme,"onUpdate:modelValue":s[0]||(s[0]=e=>n(t).settings.theme=e),title:f.name,options:f.children,"render-label":L,"label-field":"name","value-field":"key","on-update-value":e=>("toggleTheme"in a?a.toggleTheme:n(y))(e)},null,8,["modelValue","title","options","on-update-value"]),l(o,{modelValue:n(t).settings.language,"onUpdate:modelValue":s[1]||(s[1]=e=>n(t).settings.language=e),title:S.name,options:S.children,"label-field":"name","value-field":"key","on-update-value":e=>j(e)},null,8,["modelValue","title","options","on-update-value"]),l(o,{modelValue:n(t).settings.websitePreference,"onUpdate:modelValue":s[2]||(s[2]=e=>n(t).settings.websitePreference=e),title:b.name,options:b.children,"label-field":"name","value-field":"key","on-update-value":P},null,8,["modelValue","title","options"]),l(o,{modelValue:n(t).settings.tagMode,"onUpdate:modelValue":s[3]||(s[3]=e=>n(t).settings.tagMode=e),title:h.name,options:h.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({tagMode:e})},null,8,["modelValue","title","options","on-update-value"]),l(o,{modelValue:n(t).settings.search,"onUpdate:modelValue":s[4]||(s[4]=e=>n(t).settings.search=e),title:w.name,options:w.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({search:e})},null,8,["modelValue","title","options","on-update-value"]),l(o,{modelValue:n(t).settings.iconStyle,"onUpdate:modelValue":s[5]||(s[5]=e=>n(t).settings.iconStyle=e),title:V.name,options:V.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({iconStyle:e})},null,8,["modelValue","title","options","on-update-value"]),l(o,{modelValue:n(t).settings.linkStrategy,"onUpdate:modelValue":s[6]||(s[6]=e=>n(t).settings.linkStrategy=e),title:k.name,options:k.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({linkStrategy:e})},null,8,["modelValue","title","options","on-update-value"]),l(o,{modelValue:n(t).settings.showTime,"onUpdate:modelValue":s[7]||(s[7]=e=>n(t).settings.showTime=e),title:C.name,options:C.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({showTime:e})},null,8,["modelValue","title","options","on-update-value"]),l(o,{modelValue:n(t).settings.showDate,"onUpdate:modelValue":s[8]||(s[8]=e=>n(t).settings.showDate=e),title:D.name,options:D.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({showDate:e})},null,8,["modelValue","title","options","on-update-value"]),l(o,{modelValue:n(t).settings.showSecond,"onUpdate:modelValue":s[9]||(s[9]=e=>n(t).settings.showSecond=e),title:U.name,options:U.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({showSecond:e})},null,8,["modelValue","title","options","on-update-value"]),l(o,{modelValue:n(t).settings.showLunar,"onUpdate:modelValue":s[10]||(s[10]=e=>n(t).settings.showLunar=e),title:$.name,options:$.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({showLunar:e})},null,8,["modelValue","title","options","on-update-value"]),l(o,{modelValue:n(t).settings.showFooter,"onUpdate:modelValue":s[11]||(s[11]=e=>n(t).settings.showFooter=e),title:x.name,options:x.children,"label-field":"name","value-field":"key","on-update-value":e=>n(t).setSettings({showFooter:e})},null,8,["modelValue","title","options","on-update-value"])]),g("div",H,[l(i,{type:"primary",secondary:"",onClick:N},{default:p(()=>[c(m(a.$t("button.resetData")),1)]),_:1}),l(i,{type:"success",secondary:"",onClick:M},{default:p(()=>[c(m(a.$t("button.importData")),1)]),_:1}),l(i,{type:"primary",onClick:E},{default:p(()=>[c(m(a.$t("button.exportData")),1)]),_:1})]),g("div",K,[l(i,{size:"large",type:"primary",onClick:s[12]||(s[12]=e=>a.$router.back())},{default:p(()=>[c(m(a.$t("button.complete")),1)]),_:1})])])):z("",!0)}}});export{Z as _};
