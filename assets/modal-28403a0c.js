import{ch as T,h as r,C as A,i as M,bs as b,ci as s,cg as p,a2 as v,cj as m}from"./index-3d7fbf2c.js";const w={add:()=>s("common.add"),update:()=>s("common.edit")},E={cate:()=>s("common.cate"),group:()=>s("common.group"),site:()=>s("common.site")},k=T("modal",()=>{const o=r(!1),i=r("add"),a=r("site"),g=A(()=>w[i.value]()+E[a.value]()),e=M(),t=b({name:"",url:"",favicon:"",desc:""});function C(n,f,d=-1,l=-1){i.value=n,a.value=f,d!==-1&&e.setGroupIndex(d),l!==-1&&e.setSiteIndex(l),o.value=!0,n==="update"&&Object.assign(t,{site:()=>m(t,e.data[e.cateIndex].groupList[d].siteList[l]),group:()=>m(t,e.data[e.cateIndex].groupList[d]),cate:()=>m(t,e.data[e.cateIndex])}[f]())}let u=0;const S={add:{site:()=>e.addSite({id:u,...t}),group:()=>e.addGroup({id:u,name:t.name,siteList:[]}),cate:()=>e.addCate({id:u,name:t.name,groupList:[]})},update:{site:()=>e.updateSite({...t}),group:()=>e.updateGroup({name:t.name}),cate:()=>e.updateCate({name:t.name})}},h={site:()=>e.deleteSite(),group:()=>e.deleteGroup(),cate:()=>e.deleteCate()};function x(){o.value=!1}let c=!1;function G(){c||p()&&(c=!0,v(()=>{u=Date.now(),S[i.value][a.value](),o.value=!1,setTimeout(()=>c=!1,1e3)}))}function I(){p()&&v(()=>{h[a.value](),o.value=!1,a.value==="cate"&&e.cateIndex>0&&e.setCateIndex(e.cateIndex-1)})}function L(){let n;for(n in t)t[n]=""}return{modalVisible:o,action:i,target:a,title:g,inputValues:t,showModal:C,handleCancel:x,handleCommit:G,handleDelete:I,clearInput:L}});export{k as u};
